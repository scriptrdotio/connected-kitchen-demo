{"acl":{"read":"nobody","write":"nobody","execute":"scriptr"},"contentType":"application\/vnd.scriptr-javascript","userConfig":"\/*#*SCRIPTR_PLUGIN*#*{\"metadata\":{\"name\":\"SimpleDecisionTable\",\"plugindata\":{\"columns\":[{\"field\":\"recid\",\"caption\":\"Rec. Id\",\"size\":\"100%\",\"resizable\":true,\"hidden\":true,\"noDrag\":true},{\"field\":\"rowtype\",\"caption\":\"Type\",\"size\":\"100%\",\"hidden\":true,\"noDrag\":true},{\"field\":\"name\",\"caption\":\"\",\"size\":\"100%\",\"noDrag\":true,\"editable\":{\"type\":\"text\",\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\",\"items\":[],\"selected\":\"MAINTENANCE_TICKET\"},\"sizeType\":\"%\",\"sizeCalculated\":\"120px\",\"min\":120,\"sizeCorrected\":\"33.33%\"},{\"field\":\"fieldType\",\"caption\":\"Type\",\"size\":\"100%\",\"noDrag\":true,\"editable\":{\"type\":\"select\",\"items\":[{\"id\":\"number\",\"text\":\"number\"},{\"id\":\"string\",\"text\":\"string\"},{\"id\":\"boolean\",\"text\":\"boolean\"},{\"id\":\"date\",\"text\":\"date\"},{\"id\":\"function\",\"text\":\"function\"}],\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\"},\"sizeType\":\"%\",\"sizeCalculated\":\"120px\",\"min\":120,\"sizeCorrected\":\"33.33%\"},{\"field\":\"rule1\",\"caption\":\"Rule 1\",\"size\":\"100%\",\"editable\":{\"type\":\"myType\",\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\",\"items\":[],\"selected\":\"dateChecker,90\"},\"sizeType\":\"%\",\"sizeCalculated\":\"120px\",\"min\":120,\"sizeCorrected\":\"33.33%\"}],\"records\":[{\"recid\":4,\"name\":\"fridge_last_maintenance\",\"rowtype\":\"condition\",\"fieldType\":\"function\",\"style\":{\"4\":\"\"},\"rule1\":\"dateChecker,0\",\"rule2\":\"<10\",\"rule3\":\"<20\",\"rule4\":\"<20\",\"rule6\":\"<30\",\"rule5\":\"<30\",\"rule7\":\"<40\",\"rule8\":\"<40\",\"rule9\":\">40\"},{\"recid\":6,\"name\":\"FRIDGE_MAINTENANCE_TICKET\",\"rowtype\":\"action\",\"fieldType\":\"string\",\"attr\":\"action='true'\",\"style\":{\"2\":\"\"},\"rule1\":\"true\",\"rule2\":\"true\",\"rule3\":\"\",\"rule4\":\"true\",\"rule5\":\"\",\"rule6\":\"true\",\"rule7\":\"\",\"rule8\":\"true\",\"rule9\":\"true\"}],\"prescript\":\"var log = require(\\\"log\\\");\\nlog.setLevel(\\\"INFO\\\");\\nvar moment = require(\\\"\/modules\/momentjs\/moment.min.js\\\").moment;\\nvar all = require(\\\"smartkitchens\/entities\/thresholds\/all\\\");\\n\\n\/\/defaultMaintenanceDays: the number of days allowed before maintenance\\nfunction dateChecker(last_maintenance, defaultMaintenanceDays) {\\n  var currentDate = new Date().getTime();\\n  var delta = currentDate - last_maintenance;\\n  var duration = moment.duration(delta, 'milliseconds');\\n  var deltaDays = duration.asDays();\\n  var alertThresholdVal = all.getMaintenanceThreshold(request.user.id);\\n  log.info(\\\"alertThresholdVal: \\\" + alertThresholdVal)\\n  if(alertThresholdVal == null || typeof alertThresholdVal == 'undefined') alertThresholdVal = defaultMaintenanceDays;\\n  return !(deltaDays < defaultMaintenanceDays); \/\/Get slider maintenance days, if not use defaultMaintenanceDays\\n}\\n\\t\",\"postscript\":\"\/\/Variable \\\"decision\\\" is the object returned by the decision table execution.\\n\/\/Variable \\\"decision\\\" format is [{\\\"action1\\\": \\\"value1\\\", \\\"action2\\\":  \\\"value2\\\"}].\\nconsole.log(JSON.stringify(decision))\\nreturn decision;\",\"exclusive\":true}}}*#*#*\/"}